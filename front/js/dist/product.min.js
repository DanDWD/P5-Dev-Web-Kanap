"use strict";function getProductId(){var e=new URL(window.location.href),t=new URLSearchParams(e.search);if(t.has("id"))return t.get("id");alert("Erreur : impossible de récupérer l'identifiant dans l'url")}function getProductData(){var t,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=getProductId(),e.prev=1,e.next=4,regeneratorRuntime.awrap(fetch("http://localhost:3000/api/products/".concat(t)));case 4:return n=e.sent,e.next=7,regeneratorRuntime.awrap(n.json());case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),alert("Erreur. L'API est injoinable"+e.t0);case 13:case"end":return e.stop()}},null,null,[[1,10]])}function addProductToCart(e){var t=document.querySelector("#colors").value,n=document.querySelector("#quantity").value,r="";if(e||(r+="il manque l'identifiant produit\n"),(n<1||100<n)&&(r+="Quantité non séléctionnée !\n"),""==t&&(r+="Couleur non séléctionnée !\n"),""!==r)alert(r);else{var a={id:e,color:t,quantity:n},o=JSON.parse(localStorage.getItem("panier"));if(null==o){var c=[a];localStorage.setItem("panier",JSON.stringify(c))}else if(1==o.some(function(e){return e.id===a.id&&e.color===a.color})){var i=o.findIndex(function(e){return e.id===a.id&&e.color===a.color});o[i].quantity=parseFloat(o[i].quantity)+parseFloat(a.quantity),localStorage.setItem("panier",JSON.stringify(o))}else o.push(a),localStorage.setItem("panier",JSON.stringify(o));alert("".concat(a.quantity," article(s) ").concat(a.color," ajoute(s) dans le panier"))}}!function(){var t,n,r;regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(getProductData());case 2:t=e.sent,document.getElementById("title").textContent=t.name,document.getElementById("price").textContent=t.price,document.getElementById("description").textContent=t.description,document.querySelector(".item__img").innerHTML='\n            <img src="'.concat(t.imageUrl,'" alt="').concat(t.altTxt,'">\n        '),n=t.colors,r="",n.forEach(function(e){var t='\n                <option value="'.concat(e,'">').concat(e,"</option>\n            ");r+=t}),document.getElementById("colors").innerHTML+=r,document.getElementById("addToCart").addEventListener("click",function(e){addProductToCart(t._id)});case 12:case"end":return e.stop()}})}();
//# sourceMappingURL=product.min.js.map
